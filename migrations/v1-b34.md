# OmniCore 1.0.0-beta.33 to 1.0.0-beta.34 Migration Guide

This document outlines the necessary steps to migrate from OmniCore version 1.0.0-beta.33 to version 1.0.0-beta.34. Please follow the instructions carefully to ensure a smooth transition.

This beta release migrates the entire project to the mojmap mappings, and replaces Legacy Yarn with [Cursed Mappings][cursed-mappings] (an effective port of MCP to non-Forge environments).
Along with this migration, to fit the new mappings, many APIs have had their naming schemes changed to better reflect their usage of the underlying Minecraft code and/or the equivalent Mojang names.

## Why Switch?
With the upcoming Minecraft 1.21.12 / 1.22 version, Mojang will be completely removing obfuscation from the game (ðŸŽ‰), meaning that the deobfuscated names will be released publicly and be available to us
in our development environments. This means that the community mappings (Yarn, MCP, Cursed, etc) will no longer be necessary for modding going forward.
By switching to mojmap now, the names should effectively stay the exact same once we cross this transition period, minimizing future disruptions.
Additionally, many mod developers prefer using mojmap directly, as it is the official naming scheme used by Mojang and provides more clarity with the intent used when writing the original game code.

## New Naming Conventions
The following is a list of renamed classes and types in this release:
- `OmniIdentifier` -> `OmniResourceLocation`
- `IdentifierArgumentType` -> `ResourceLocationArgumentType`
- `OmniBuiltBuffer` -> `OmniMeshData`
- `OmniMatrixStack` -> `OmniPoseStack`
- `OmniMatrixStacks` -> `OmniPoseStacks`
- `OmniMatrixUnit` -> `OmniPoseUnit`
- `OmniPacketByteBuf` -> `OmniByteBuf`
- `OmniWorld` -> `OmniLevel`
- `VanillaCustomPayload` -> `VanillaCustomPacketPayload`

And the following are other miscellaneous API changes:
- All usages where `OmniMatrixStack`/`OmniPoseStack` were referred to as `stack`, `matrixStack` or `matrices` have been renamed to `pose`.
- `OmniRenderingContext#withMatrices` has been renamed to `withPose`.
- The top-level `identifierOrNull` and `identifierOrThrow` functions have been renamed to `locationOrNull` and `locationOrThrow` respectively.

## Additions
- A top-level `textureManager` property has been added to `OmniClient` for easier access to the client's `TextureManager`. This bridges the package-private `renderEngine` in `Minecraft` in 1.8 - 1.12, and `textureManager` in 1.13+.
- New `get` functions have been added to all of the `ArgumentType` implementations. Any which had a differing name (such as `getColor`, `getSound`, etc.) have been renamed to simply `get` for consistency.
- `OmniGameMode` now provides a `vanilla` property which returns the equivalent `GameType` enum value for the current game mode.

## Miscellaneous Changes
- `GameModeArgumentType` has been reworked, it now mirrors the logic of both the legacy and modern game mode command inputs. This means it can now parse numeric IDs (0 survival, 1 creative, 2 adventure, 3 spectator), shortened aliases ('s', 'c', 'a', 'sp') and full names ('survival', 'creative', 'adventure', 'spectator') across all versions.

[cursed-mappings]: https://github.com/BleachDev/cursed-mappings
